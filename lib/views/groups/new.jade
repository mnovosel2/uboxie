extends ../default/layout
block content
	form(action='/api/1/groups/new' method='POST', id='newGroupForm')
		.form-group
			input.form-control(type='text', placeholder='Group name...', id="name" name='groupName')
			input.form-control.btn-primary(type='submit', value='Create', id="sbn-btn")
block custom-scripts
	script.
		$(function(){
			$('#newGroupForm').on('submit',function(e){
				var data=$(this).serialize();
				e.preventDefault();

				$.post('/api/1/groups/new',data,function(res){
					if(res.status){	
						//console.log('groupCreationData:');					
						//console.log(res.group);
						socket.emit('addGroup', res.group);
						/*socket.emit('addGroup', {
								
						    "created": res.group.created,
						    "currentSong": {
						    "duration": 0,
						    "key": 0,
						    "finished": false,
						    "isPlaying": false
						    },
						    "name": res.group.name,
						    "songsInGroup": [],
						    "currentSongPosition": -1,
						    "rating": 0.0,
						    "listenerNumber": 0,
						    "_id": res.group._id


							});*/
						window.location.href="/";
					}
				});
			});

		});